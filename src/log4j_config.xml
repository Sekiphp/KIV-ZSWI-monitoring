<?xml version="1.0" encoding="UTF-8"?>
<Configuration status="WARN">

  <Properties>
  	<!-- format vystupu -->
    <Property name="logFormat">%d{HH:mm:ss} [%-level - %logger{1}.%-M()] - %msg%n</Property>
    <!-- nazev vystupniho souboru pro logy cinnosti aplikace -->
    <Property name="debugFileDest">debug-log.txt</Property>
    <!-- nazvy vystupnich souboru pro logy jednotlivych sluzeb -->
    <Property name="systemLoadFileDest">system_load-log.txt</Property>
    <Property name="instanceIDFileDest">instance_id-log.txt</Property>
    <Property name="sessionsCountFileDest">sessions_count-log.txt</Property>
    <Property name="sessionsInfoFileDest">sessions_info-log.txt</Property>
    <Property name="memoryInfoFileDest">memory_info-log.txt</Property>
  </Properties>
  
  <Appenders>
  <!-- vypis do konzole - pro testovaci ucely -->
    <Console name="console" target="SYSTEM_OUT">
      <PatternLayout pattern="${logFormat}"/>
    </Console>
    <!-- logovani cinnosti aplikace (5 souborÅ¯ po 5 MB) -->
    <RollingFile name="debugFile" fileName="${debugFileDest}" filePattern="${debugFileDest}_%i">
	  <PatternLayout pattern="${format}"/>
	  <DefaultRolloverStrategy min="1" max="5" />
	  <SizeBasedTriggeringPolicy size="5 MB" />
    </RollingFile>
    <!-- logovani pro jednotlive sluzby (od kazde 5 historickych souboru po 1 MB) -->
    <RollingFile name="systemLoadFile" fileName="${systemLoadFileDest}" filePattern="${systemLoadFileDest}_%i">
		<PatternLayout pattern="${format}"/>
		<DefaultRolloverStrategy min="1" max="5" />
		<SizeBasedTriggeringPolicy size="1 MB" />
    </RollingFile>
    <RollingFile name="instanceIDFile" fileName="${instanceIDFileDest}" filePattern="${instanceIDFileDest}_%i">
		<PatternLayout pattern="${format}"/>
		<DefaultRolloverStrategy min="1" max="5" />
		<SizeBasedTriggeringPolicy size="1 MB" />		
    </RollingFile>
    <RollingFile name="sessionsCountFile" fileName="${sessionsCountFileDest}" filePattern="${sessionsCountFileDest}_%i">
		<PatternLayout pattern="${format}"/>
		<DefaultRolloverStrategy min="1" max="5" />
		<SizeBasedTriggeringPolicy size="1 MB" />		
    </RollingFile>
    <RollingFile name="sessionsInfoFile" fileName="${sessionsInfoFileDest}" filePattern="${sessionsInfoFileDest}_%i">
		<PatternLayout pattern="${format}"/>
		<DefaultRolloverStrategy min="1" max="5" />
		<SizeBasedTriggeringPolicy size="1 MB" />		
    </RollingFile>
    <RollingFile name="memoryInfoFile" fileName="${memoryInfoFileDest}" filePattern="${memoryInfoFileDest}_%i">
		<PatternLayout pattern="${format}"/>
		<DefaultRolloverStrategy min="1" max="5" />
		<SizeBasedTriggeringPolicy size="1 MB" />		
    </RollingFile>
  </Appenders>

  <Loggers>
  	<!-- vystup loggeru do konzole -->
    <Root level="DEBUG">
      <AppenderRef ref="console"/>
    </Root>
    <!-- odkazy na loggery pro logovani cinnosti aplikace -->
    <Logger name="Hlavni" level="DEBUG">
      <AppenderRef ref="debugFile"/>
    </Logger>
    <Logger name="UrlFactory" level="DEBUG">
      <AppenderRef ref="debugFile"/>
    </Logger>
    <Logger name="PeerFileMonitor" level="DEBUG">
      <AppenderRef ref="debugFile"/>
    </Logger>
    <!-- odkazy na loggery pro logovani jednotlivych sluzeb -->
    <Logger name="SystemLoad" level="DEBUG">
      <AppenderRef ref="systemLoadFile"/>
    </Logger>
    <Logger name="InstanceId" level="DEBUG">
      <AppenderRef ref="instanceIDFile"/>
    </Logger>
    <Logger name="SessionsCount" level="DEBUG">
      <AppenderRef ref="sessionsCountFile"/>
    </Logger>
    <Logger name="SessionsInfo" level="DEBUG">
      <AppenderRef ref="sessionsInfoFile"/>
    </Logger>
    <Logger name="MemoryInfo" level="DEBUG">
      <AppenderRef ref="memoryInfoFile"/>
    </Logger>
  </Loggers>
  
</Configuration>